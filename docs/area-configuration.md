# エリア・ランドマーク設定ガイド

## 概要

MDMS（Murder Mystery Detection System）では、証拠記録時にプレイヤーの位置を詳細に記録します。この機能をマップに合わせて設定するために、`src/constants/AreaConfigs.ts` ファイルを編集することができます。

## ファイル構造

```
src/constants/AreaConfigs.ts
├── AreaBounds[]     - エリア境界の定義
├── Landmark[]       - ランドマークの定義
└── ヘルパー関数      - 座標からの自動判定機能
```

## エリア設定

### AreaBounds インターフェース

```typescript
interface AreaBounds {
  name: string;           // エリア名
  minX: number;          // X座標最小値
  maxX: number;          // X座標最大値
  minZ: number;          // Z座標最小値
  maxZ: number;          // Z座標最大値
  priority: number;      // 優先度（重複時の判定用）
  description?: string;   // エリアの説明
}
```

### エリア設定例

```typescript
{
  name: "中央広場",
  minX: -25,
  maxX: 25,
  minZ: -25,
  maxZ: 25,
  priority: 100,
  description: "街の中心部。重要な建物が集まっている"
}
```

### 優先度について

- **高い数値**: より優先的に判定される
- **重複エリア**: 複数のエリアに該当する場合、優先度が高いものが選択される
- **推奨値**: 
  - 中央広場など重要エリア: 100
  - 通常エリア: 80
  - 農業地区など: 70
  - 郊外（デフォルト）: 1

## ランドマーク設定

### Landmark インターフェース

```typescript
interface Landmark {
  name: string;           // ランドマーク名
  x: number;             // X座標
  y: number;             // Y座標
  z: number;             // Z座標
  detectionRadius: number; // 検出半径
  description?: string;    // ランドマークの説明
}
```

### ランドマーク設定例

```typescript
{
  name: "市庁舎",
  x: 0,
  y: 64,
  z: 0,
  detectionRadius: 30,
  description: "街の行政の中心。重要な会議が開かれる"
}
```

### 検出半径について

- **大型建物**: 30-40ブロック
- **中型建物**: 20-25ブロック
- **小型建物**: 15-20ブロック

## 設定手順

### 1. 座標の確認

Minecraftで以下のコマンドを使用して座標を確認：
```
/tp ~ ~ ~
```

### 2. エリア境界の設定

1. `AREA_BOUNDS` 配列を編集
2. マップに合わせてminX、maxX、minZ、maxZを設定
3. 優先度を適切に設定

### 3. ランドマークの配置

1. `LANDMARKS` 配列を編集
2. 重要な建物の正確な座標を設定
3. 適切な検出半径を設定

### 4. テスト

1. ゲーム内でエリア移動をテスト
2. 証拠記録でエリア名が正しく表示されるか確認
3. ランドマーク検出が適切に動作するか確認

## 設定のヒント

### エリア分け戦略

- **機能別分割**: 住宅地区、商業地区、工業地区など
- **重要度別分割**: 中央広場、貴族区、郊外など
- **物語別分割**: マーダーミステリーの舞台に合わせた命名

### ランドマーク配置戦略

- **推理の手がかり**: 重要な証拠が発見される可能性がある場所
- **プレイヤーの集合場所**: 宿屋、酒場、市場など
- **特徴的な建物**: 教会、市庁舎、図書館など

### 命名のコツ

- **分かりやすい名前**: プレイヤーが理解しやすい名称
- **雰囲気作り**: 中世ファンタジーに合った名称
- **一意性**: 似たような名前を避ける

## デフォルト設定

現在の設定では以下のエリア・ランドマークが定義されています：

### エリア
- 中央広場（-25～25, -25～25）
- 住宅地区（25～100, 25～100）
- 商業地区（100～200, 100～200）
- 工業地区（-100～-25, -100～-25）
- 港湾地区（-50～50, 100～200）
- 貴族区（-200～-100, 25～100）
- 農業地区（25～100, -100～-25）
- 神殿地区（-25～25, -100～-50）
- 郊外（全域、最低優先度）

### 主要ランドマーク
- 市庁舎（0, 64, 0）
- 大聖堂（0, 64, -75）
- 中央市場（150, 64, 150）
- 大桟橋（0, 64, 150）
- 領主邸（-150, 64, 60）

## トラブルシューティング

### エリアが正しく判定されない
1. 座標範囲の重複を確認
2. 優先度設定を見直し
3. minX ≤ maxX, minZ ≤ maxZ であることを確認

### ランドマークが検出されない
1. 座標の正確性を確認
2. 検出半径を調整
3. Y座標が適切か確認

### ビルドエラーが発生する
1. TypeScriptの型定義を確認
2. 配列の最後にカンマが不要でないか確認
3. 文字列が適切に囲まれているか確認

## カスタマイズ例

```typescript
// 和風マップ用の設定例
export const AREA_BOUNDS: AreaBounds[] = [
  {
    name: "城下町",
    minX: -50,
    maxX: 50,
    minZ: -50,
    maxZ: 50,
    priority: 100,
    description: "城を中心とした賑やかな町"
  },
  {
    name: "武家屋敷",
    minX: 50,
    maxX: 150,
    minZ: 50,
    maxZ: 150,
    priority: 90,
    description: "武士たちが住む格式高い屋敷街"
  },
  // ... 他の設定
];

export const LANDMARKS: Landmark[] = [
  {
    name: "本城",
    x: 0,
    y: 80,
    z: 0,
    detectionRadius: 50,
    description: "領主の居住する堅固な城"
  },
  {
    name: "神社",
    x: -100,
    y: 70,
    z: -100,
    detectionRadius: 30,
    description: "古くから信仰を集める神社"
  },
  // ... 他の設定
];
```

設定を変更した後は、`npm run build` を実行してゲームに反映させてください。